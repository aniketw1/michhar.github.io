<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Javascript and Python Meet through Magic and IPython</title>
  <meta name="description" content="A little exchange">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://michhar.github.io/css/main.css">
  <link rel="canonical" href="https://michhar.github.io/2017/02/18/javascript-and-python-have-a-party.html">
  <link rel="alternate" type="application/rss+xml" title="Waterfalls of Data" href="https://michhar.github.io/feed.xml">

  <!-- Social -->
  <!--<meta property="fb:admins" content="1554290006" />-->
  <meta property="og:title" content="Javascript and Python Meet through Magic and IPython" />
  <meta name="twitter:title" content="Javascript and Python Meet through Magic and IPython" />
  
  <meta name="keywords" content="python,javascript,jupyter," />
  
  <meta property="og:description" content="A little exchange" />
  <meta name="twitter:description" content="A little exchange" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:site_name" content="Waterfalls of Data" />

  <!--
  <meta property="og:image" content="/img/js_python_friends/header_pic.jpg" />
  <meta property="twitter:image" content="/img/js_python_friends/header_pic.jpg" />
  
  <meta name="twitter:card" content="summary" />-->

  
  <meta property="og:image" content="//img/js_python_friends/header_pic.jpg" />
  <meta property="twitter:image" content="//img/js_python_friends/header_pic.jpg" />
  
  <meta name="twitter:card" content="summary" />
  
  
    
  <meta property="article:tag" content="python">
    
  <meta property="article:tag" content="javascript">
    
  <meta property="article:tag" content="jupyter">
    
  
</head>


  <body>

    <header class="site-header">
  <div class="wrapper">
    <h1 class="site-title">
      <a href="/">Waterfalls of Data</a>
    </h1>
    
    <h2 class="site-description">Data science in the world of software dev
</h2>
    
  </div>
  <nav class="site-nav">
    <ul class="trigger">
      <li class=""><a class="page-link" href="https://michhar.github.io/">Home</a></li>
            <li class=""><a class="page-link" href="/about.html">About</a></li>
      
      <li class="has-submenu">
        <a class="page-link hover-link" href="#projects">Projects &gt;</a>
        <ul class="submenu">
        
          <li><a class="page-link" href="https://github.com/michhar/python4ds-notebooks/">Python for Data Science</a></li>
        
          <li><a class="page-link" href="https://github.com/michhar/cntk-playground/">My CNTK Playground</a></li>
        
          <li><a class="page-link" href="https://github.com/michhar/python-jupyter-notebooks/">Python Notebooks on Azure</a></li>
        
          <!--<li><a href="/cv/MHarris_CV_2017.pdf" class="page-link">My Resume´</a></li>-->
        </ul>
      </li>
      
    </ul>
  </nav>
</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Javascript and Python Meet through Magic and IPython</h1>
    <p class="reading-time" title="Estimated read time">
  3 mins read
</p>
  <a class="sh-twt" href="#" target="_blank" onclick="window.open('https://twitter.com/share?url='+window.location.href+'&via=rheartpython','_blank','height=300,width=600');return false;">
    <span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</a>

    
    <figure itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
      <img itemprop="url" src="/img/js_python_friends/header_pic.jpg" alt="Javascript and Python Meet through Magic and IPython" />
    </figure>
    
    <p class="post-meta"><time datetime="2017-02-18T00:00:00-08:00" itemprop="datePublished">February 18, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody"><h3 id="a-little-exchange">A little exchange</h3>

<p><em>Python</em>:  “I want your silly game to have a starting value of 100 for life points for all players.”</p>

<p><em>Javascript</em>:  “I read you loud and clear.  Let’s take that starting life and play this silly game.  Alfred and Wallace are on the same side battling orcs.  Alfred decides to give life to Wallace because Wallace appears to be about to bravely charge onto the battle field and may need it.  Done.  That’s all the game can do right now because I just started making it.”</p>

<p><em>Python</em>:  “Let’s see…oh wow.  Your game code actually worked.  Alfred now has 99 life points and Wallace has 101.  Good job us.”</p>

<p>I went on a hunt to find the cleanest and most succinct way to pass a variable from Python to Javascript and then back to Python in a Jupyter notebook.  I wanted a proof of principle upon which I could later base my D3 graphics using Python data as <code class="highlighter-rouge">pandas</code> dataframes.</p>

<p>So, this silly example can be translated into code as follows.</p>

<p>First, things are actually easy for us because we are in a Jupyter notebook living in a browser, utilizing all sorts of widgets and HTML elements already.  We can tap into that (and actually the DOM) to get some of the functionality we require.</p>

<p>So, in Python we can use the IPython.display module with the HTML function allowing us to embed an element for later use.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># Python</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="n">pystartlife</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">HTML</span><span class="p">(</span><span class="s">"&lt;div id='textid'&gt;"</span> <span class="o">+</span> <span class="n">pystartlife</span> <span class="o">+</span> <span class="s">"&lt;/div&gt;"</span><span class="p">)</span>
</code></pre>
</div>

<p>We’ve created a Python variable, <code class="highlighter-rouge">pystartlife</code>, and embedded it as a <code class="highlighter-rouge">div</code> element, literally just using raw HTML.  Now we use the Javascript magics (<code class="highlighter-rouge">%%javascript</code>) to create a Javascript coding environment for the next cell.  (BTW there are magics for many more languages - very cool.)</p>

<p>In the Javascript, now, we grab the <code class="highlighter-rouge">div</code> element with the Python variable from the document or webpage and play our game.  We also write the game.  (This game is based on a <a href="https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBMdkKFn3HasZnnAqVjzHn_">Node.js tutorial</a> by thenewboston on YouTube - thank you Bucky!).</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="o">%%</span><span class="nx">javascript</span>

<span class="c1">// Get the python variable from the DOM</span>
<span class="kd">var</span> <span class="nx">startlife</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'textid'</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">;</span>

<span class="c1">// Define a User class with a method</span>
<span class="kd">function</span> <span class="nx">User</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">life</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">startlife</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">giveLife</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">giveLife</span><span class="p">(</span><span class="nx">targetPlayer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">targetPlayer</span><span class="p">.</span><span class="nx">life</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">life</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Use class</span>
<span class="kd">var</span> <span class="nx">Alfred</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">Wallace</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">();</span>

<span class="c1">// Names were blank so give them name values</span>
<span class="nx">Alfred</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Alfred'</span><span class="p">;</span>
<span class="nx">Wallace</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Wallace'</span><span class="p">;</span>

<span class="c1">// Let's play a game!</span>

<span class="c1">// Let Alfred give life to Wallace</span>
<span class="nx">Alfred</span><span class="p">.</span><span class="nx">giveLife</span><span class="p">(</span><span class="nx">Wallace</span><span class="p">);</span>

<span class="c1">// Save these variables back to python variables to work with later</span>
<span class="nx">IPython</span><span class="p">.</span><span class="nx">notebook</span><span class="p">.</span><span class="nx">kernel</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s1">'Alfred_life="'</span> <span class="o">+</span> <span class="nx">Alfred</span><span class="p">.</span><span class="nx">life</span> <span class="o">+</span> <span class="s1">'";'</span><span class="p">);</span>
<span class="nx">IPython</span><span class="p">.</span><span class="nx">notebook</span><span class="p">.</span><span class="nx">kernel</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s1">'Wallace_life="'</span> <span class="o">+</span> <span class="nx">Wallace</span><span class="p">.</span><span class="nx">life</span> <span class="o">+</span> <span class="s1">'";'</span><span class="p">);</span>
</code></pre>
</div>

<p>We grab the Python variable now embedded with <code class="highlighter-rouge">document.getElementById('idname').innerHTML</code>, a DOM function and attribute which grabs the <code class="highlighter-rouge">div</code> by its <em>id</em> (not name) and takes what is in the text part of the <code class="highlighter-rouge">div</code>.</p>

<p>Then we define a class in Javascript that contains an altruistic method for giving life.  We create some users and give them names.  We then “play” the game and allow one to give life to another with the method in the User class - how generous of Alfred!</p>

<p>Lastly, the lovely magic part, we use this sneaky Javascript function from the IPython class that executes Python statements.  We could execute any Python statement really in this way, e.g., <code class="highlighter-rouge">IPython.notebook.kernel.execute('print("Hello World!")');</code>  We include our life values (Javascript variables) into this executable string and, well, execute it.</p>

<p>And to see if the magic worked, we run a simple couple of print statements back in Python:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># Python</span>
<span class="k">print</span><span class="p">(</span><span class="n">Alfred_life</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">Wallace_life</span><span class="p">)</span>
</code></pre>
</div>

<p>With low and behold and output of:  99 and 101.  Way to pay it forward, Alfred!</p>

<p>You can find this code and more in <a href="https://github.com/michhar/python-jupyter-notebooks/blob/master/general/Jupyter_and_JavaScript.ipynb">this</a> Jupyter notebook.</p>

</div>
  

</article>

<!--Discus comments:-->


<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = "https://michhar.github.io/tutorial_posts/notebooks1-post";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "notebooks1-post"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//blog-vf2v0kav1a.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                                      
                                


<script>/* Google Analytics*/
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86308542-1', 'auto');
  ga('send', 'pageview');

</script>

      </div>
    </div>
    

    

<footer class="site-footer">
  <div class="wrapper">
    <!--<h2 class="footer-heading">Waterfalls of Data</h2>-->
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Waterfalls of Data</li>
          <li><a href="mailto:michhar@microsoft.com">michhar@microsoft.com</a></li>
          <li><em>Powered by <a href="http://bitwiser.in/Jekyll-Read/" target="_blank">Jekyll-Read</a> theme.</em></li>
        </ul>
      </div>
      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/michhar"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">michhar</span></a>

          </li>
          
          
          <li>
            <a href="https://twitter.com/rheartpython"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">rheartpython</span></a>

          </li>
          
          <li>Subscribe <a href="/feed.xml">via RSS</a></li>
        </ul>
      </div>
      <div class="footer-col footer-col-3">
        <p>Data science in the world of software dev
</p>
        
      </div>
    </div>
  </div>
</footer>
<script type="text/javascript" src="https://michhar.github.io/js/script.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-86308542-1', 'https://michhar.github.io');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
</script>



  </body>

</html>
